# contest 861 (2025-7-1)

## [problem C](https://codeforces.com/contest/1808/problem/C)

### 题目简述

每艘飞船的编号是一个正整数 $X$，它的幸运值（luckiness） 定义为该数中最大数字与最小数字之差。例如：

* $142857$ 的幸运值为 $8 - 1 = 7$；

* $111$ 的幸运值为 $1 - 1 = 0$。

现在给定一个区间 $[l, r]$，请你找出这个区间中幸运值最小的数字（即最不幸运的编号），其中 $1 \leq l \leq r \leq 10^{18}$。

### 思路

暴力的做法是遍历 $l$ 到 $r$ 的所有数，然后计算幸运值并选出最小的，这样的做法的时间复杂度不允许。

因为数据规模为 $10^{18}$ 所以我们考虑可以按十进制位构造答案。
假设 $l$ 和 $r$ 的十进制最高位分别为第 $N$ 位和第 $M$ 位，当 $M > N$ 时，我们总是能构造答案为长度为 $N$ 且每一位数字都为 9 的数，
其一定在区间 $[l, r]$ 中且幸运值为 0。
当 $l$ 和 $r$ 的数字长度一致时，因为在区间 $[l, r]$ 中的数字一定以 $l$ 和 $r$ 的公共前缀为前缀，所以我们可以先将此前缀保留到答案中，
并计算前缀里数字的最大值 $mx$ 和最小值 $mn$。
我们假设 $l$ 和 $r$ 第一个不相同的数字分别为 $a$ 和 $b$，那么我们可以对答案剩余位的数字考虑以下三种构造：

* 以 $a$ 作为开头: 当确定以 $a$ 开头，我们用 $a$ 更新前缀数字的最大值 $mx$ 和最小值 $mn$，并从其下一位开始构造。
根据幸运值的计算规则，我们增添 $[mn, mx]$ 区间内的数字是不影响结果的，又因为我们想要构造的数大于 $L$，
所以我们在 $a$ 的下一位直接填上 $mx$ (若填上 $mx$ 无法大于 $L$ 那小于 $mx$ 的数字更不可行)，并且我们可以将后续的数字都填上 $mx$，
这样不会引入新的数故对结果无影响。填上后可能有两种情况，一是构造的数大于等于 $L$ 故可以作为以 $a$ 开头的最佳构造，
二是有可能构造出来的数小于 $L$。而我们总是可以继续遍历 $[mx + 1, 9]$ 找到一个数可以填充从 $a$ 的下一位到末尾的所有位置并且大于等于 $L$。
  * 说明：这样的做法相当于遍历的是 $a$ 之后后缀的数字的最大值，判断在这个后缀最大值下能不能满足大于等于 $L$ 的条件，
  并且确定最大值后全填上最大值是不影响答案且最优的构造。并且一定可以通过这个方式找到满足条件的构造（后缀最大可为全 9）。

* 以 $b$ 作为开头: 和 $a$ 开头的方式类似，我们用 $b$ 更新原先的 $mx$ 和 $mn$ 后，尝试使用 $mn$ 构造，
如果小于等于 $L$ 则存在不影响先前结果的最佳构造，否则逆序遍历 $[1, mn - 1]$ 填充后缀，找到第一个小于等于 $R$ 的构造。

* 以 $c \in [a + 1, b - 1]$ 作为开头：遍历此范围内的 $c$, 且因为 $c$ 的取值范围，
所以其后缀可以填充任意数都在 $[l, r]$ 区间中，为了不额外影响结果，可以对后缀同样填充 $c$。

通过以上方式可以构造出三种情况下的最佳结果，最终结果只需对这三种情况取最佳即可。
